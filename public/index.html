<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Finance Dashboard - Dojo/Dijit</title>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css">
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojox/grid/resources/Grid.css">
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojox/grid/resources/claroGrid.css">
    <style>
        html, body, #mainLayout {
            height: 100%;
            margin: 0;
            padding: 0;
            border-radius: 10px; /* adjust as needed */
            overflow: hidden;    /* ensures child content doesn't spill outside corners */
            border: 2px solid #fff; /* optional: a white outer border, if desired */
        }

        /* Set overall page background to fully black */
        html, body {
            background-color: rgb(0, 0, 0);
        }


        :root {
            --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
            "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
            "Courier New", monospace;
            --default-font-family: var(--font-sans);
            --default-mono-font-family: var(--font-mono);
            /* Optional: Define text color if needed */
            --color-text: #f8fafc;
        }

        /* Apply global font settings */
        html, body {
            font-family: var(--default-font-family);
            font-size: 80.5%; /* reduces default 16px to ~14px */
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            color: rgb(203,204,214) !important;
        }
        /* Force all tab labels to be gray */
        .dijitTab .tabLabel {
            color: #ccc !important;
        }

        /* Set widget (Dijit containers) backgrounds and borders */
        .dijitContentPane,
        .dijitBorderContainer,
        .dijitTitlePane,
        .dijitTab {
            background-color: rgb(16, 24, 40) !important;
            border: 1px solid rgb(255, 255, 255) !important;
        }
        #grid {
            background-color: rgb(16, 24, 40);
        }
        .dojoxGridRow,
        .dojoxGridCell {
            background-color: rgb(16, 24, 40) !important;
            color: var(--color-text); /* if you want to keep your text color consistent */
        }

        /* Style the search input */
        input[type="text"] {
            background-color: rgb(0, 0, 0); /* or black if you prefer */
            color: #fff; /* text color */
            border: 1px solid #fff; /* white border to match your theme */
            padding: 0.5rem;       /* optional: add some padding */
            border-radius: 0.25rem;/* optional: slightly rounded corners */
            box-sizing: border-box;/* ensure padding doesn't overflow */
        }

        /* Style the placeholder text */
        input[type="text"]::placeholder {
            color: #ccc; /* lighter shade for placeholder */
        }

        /* For Chrome, Safari, and Edge (WebKit-based) */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgb(16,24,40);
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgb(16,24,40);
            border-radius: 10px; /* optional: rounds the scrollbar thumb */
            border: 2px solid rgb(16,24,40); /* optional: creates padding around the thumb */
        }

        /* For Firefox */
        * {
            scrollbar-width: thin;
            scrollbar-color: rgb(16,24,40) rgb(16,24,40);
        }
        /* Change the scroll-corner background for DojoX DataGrid */
        .dojoxGrid .dojoxGridScrollbox .dojoxGridScrollCorner {
            background-color: rgb(16, 24, 40) !important;
        }
        .dojoxGrid .dojoxGridMasterView .dojoxGridContent {
            background-color: rgb(16,24,40) !important;
        }
        .dojoxGrid .dojoxGridMasterView .dojoxGridScrollbox {
            background-color: rgb(16,24,40) !important;
        }
        /* Target the grid header cells */
        .dojoxGrid .dojoxGridHeader .dojoxGridCell {
            color: #ccc !important;
        }

        /* Remove borders from child panes so only the outer border is visible */
        #mainLayout .dijitContentPane,
        #mainLayout .dijitBorderContainer {
            border-radius: 10px; /* adjust as needed */
            overflow: hidden;    /* ensures child content doesn't spill outside corners */
            border: 2px solid #fff; /* optional: a white outer border, if desired */
        }
    </style>

</head>


<body class="claro">

<!-- Top-level BorderContainer -->
<div
        id="mainLayout"
        data-dojo-type="dijit/layout/BorderContainer"
        data-dojo-props="design:'headline'"
        style="height: 100%;"
>
    <!-- Single widget at the top: a BorderContainer for tabs & news -->
    <div
            data-dojo-type="dijit/layout/BorderContainer"
            data-dojo-props="region:'top', design:'headline'"
            style="height: 200px;"
    >
        <!-- TOP region of that widget: Tabs -->
        <div
                data-dojo-type="dijit/layout/ContentPane"
                data-dojo-props="region:'top'"
                style="height:60px;"
        >
            <div
                    data-dojo-type="dijit/layout/TabContainer"
                    data-dojo-props="tabPosition:'top', nested:true"
            >
                <div data-dojo-type="dijit/layout/ContentPane" title="RIC">RIC content</div>
                <div data-dojo-type="dijit/layout/ContentPane" title="Topic">Topic content</div>
                <div data-dojo-type="dijit/layout/ContentPane" title="Portfolio">Portfolio content</div>
            </div>
        </div>

        <!-- CENTER region of that widget: News Feeds -->
        <div
                data-dojo-type="dijit/layout/ContentPane"
                data-dojo-props="region:'center'"
        >
            <h2>News Feeds</h2>
            <input type="text" placeholder="Search news..." style="width: 100%;">
            <ul>
                <li>Europeâ€™s Stock Surge Outpaces Wall Street in Historic Run</li>
                <li>Aid rushes into Myanmar after earthquake kills over 1,600, ravages cities</li>
                <li>Trump tells NBC he 'couldn't care less' if car makers hike prices due to tariffs</li>
            </ul>
        </div>
    </div>

    <!-- Center region for the rest of your layout -->
    <div
            data-dojo-type="dijit/layout/ContentPane"
            data-dojo-props="region:'center'"
    >
        <div
                data-dojo-type="dijit/layout/BorderContainer"
                data-dojo-props="design:'headline'"
                style="height:100%;"
        >
            <!-- Bottom part: 3 columns -->
            <div
                    data-dojo-type="dijit/layout/BorderContainer"
                    data-dojo-props="region:'center'"
            >
                <!-- Left grid -->
                <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'left'" style="width: 40%">
                    <h3>Cross Asset Monitor</h3>
                    <div id="grid" style="height:200px;"></div>
                </div>

                <!-- Center chart -->
                <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">
                    <h3>3-Month Price History</h3>
                    <div id="historicalChart" style="width:100%; height:200px;"></div>
                </div>
            </div>

            <!-- Bottom full-width chart -->
            <div
                    data-dojo-type="dijit/layout/ContentPane"
                    data-dojo-props="region:'bottom'"
                    style="height: 250px"
            >
                <h3>Intra Day Chart</h3>
                <div id="intraDayChart" style="width:100%; height:200px;"></div>
            </div>
        </div>
    </div>
</div>


<!-- Dojo & Charting -->
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js"
        data-dojo-config="async: true"></script>
<script>
    require([
        "dojo/parser", "dojox/grid/DataGrid", "dojo/data/ItemFileReadStore",
        "dijit/layout/BorderContainer", "dijit/layout/ContentPane", "dijit/layout/TabContainer",
        "dojox/charting/Chart2D", "dojox/charting/themes/Claro", "dojo/domReady!"
    ], function(parser, DataGrid, ItemFileReadStore, BorderContainer, ContentPane, TabContainer, Chart2D, theme) {
        parser.parse();
        var gridData = {
            identifier: 'ric',
            label: 'ric',
            items: [
                { ric: ".NDX", name: "NASDAQ 100", last: 15010.43, change: "+0.00" },
                { ric: ".FTSE", name: "FTSE 100 INDEX", last: 7455.68, change: "-0.14%" },
                { ric: ".HSI", name: "HANG SENG INDEX", last: 16993.44, change: "-2.08%" },
                { ric: ".VOO", name: "VANGUARD S&P 500 ETF", last: 511.14, change: "+1.08%" },
                { ric: ".DAX", name: "DAX INDEX", last: 22539.61, change: "+3.08%" },
                { ric: ".PX1", name: "CAC 40 INDEX", last: 7876.36, change: "-2.18%" }
            ]
        };

        var priceValues = [144.47, 149.43, 140.14, 140.11, 135.91, 133.23, 131.76, 136.24, 133.57, 137.71];
        const priceHistory = priceValues.map((price, index) => ({
            x: index,
            y: price
        }));
        //var intradayValues = [{"date": "2025-03-28T09:30:00-04:00", "price": 111.66500091552734}, {"date": "2025-03-28T09:40:00-04:00", "price": 111.981201171875}, {"date": "2025-03-28T09:50:00-04:00", "price": 111.6500015258789},{"date": "2025-03-28T10:00:00-04:00", "price": 111.2698974609375}, {"date": "2025-03-28T10:10:00-04:00", "price": 110.30999755859375}, {"date": "2025-03-28T10:20:00-04:00", "price": 109.93499755859375}, {"date": "2025-03-28T10:30:00-04:00", "price": 109.45999908447266}, {"date": "2025-03-28T10:40:00-04:00", "price": 109.9749984741211}];
        const intradayValues = [{"date": "2025-03-28T09:30:00-04:00", "price": 111.66500091552734}, {"date": "2025-03-28T09:40:00-04:00", "price": 111.981201171875}, {"date": "2025-03-28T09:50:00-04:00", "price": 111.6500015258789}, {"date": "2025-03-28T10:00:00-04:00", "price": 111.2698974609375}, {"date": "2025-03-28T10:10:00-04:00", "price": 110.30999755859375}, {"date": "2025-03-28T10:20:00-04:00", "price": 109.93499755859375}, {"date": "2025-03-28T10:30:00-04:00", "price": 109.45999908447266}, {"date": "2025-03-28T10:40:00-04:00", "price": 109.9749984741211}, {"date": "2025-03-28T10:50:00-04:00", "price": 109.88500213623047}, {"date": "2025-03-28T11:00:00-04:00", "price": 109.44499969482422}, {"date": "2025-03-28T11:10:00-04:00", "price": 109.97010040283203}, {"date": "2025-03-28T11:20:00-04:00", "price": 109.53500366210938}, {"date": "2025-03-28T11:30:00-04:00", "price": 109.95999908447266}, {"date": "2025-03-28T11:40:00-04:00", "price": 110.07009887695312}, {"date": "2025-03-28T11:50:00-04:00", "price": 109.60070037841797}, {"date": "2025-03-28T12:00:00-04:00", "price": 109.73500061035156}, {"date": "2025-03-28T12:10:00-04:00", "price": 109.71990203857422}, {"date": "2025-03-28T12:20:00-04:00", "price": 109.40499877929688}, {"date": "2025-03-28T12:30:00-04:00", "price": 110.03500366210938}, {"date": "2025-03-28T12:40:00-04:00", "price": 109.77999877929688}, {"date": "2025-03-28T12:50:00-04:00", "price": 109.875}, {"date": "2025-03-28T13:00:00-04:00", "price": 109.54499816894531}, {"date": "2025-03-28T13:10:00-04:00", "price": 109.52110290527344}, {"date": "2025-03-28T13:20:00-04:00", "price": 109.7699966430664}, {"date": "2025-03-28T13:30:00-04:00", "price": 109.61499786376953}, {"date": "2025-03-28T13:40:00-04:00", "price": 109.63999938964844}, {"date": "2025-03-28T13:50:00-04:00", "price": 109.63829803466797}, {"date": "2025-03-28T14:00:00-04:00", "price": 109.79499816894531}, {"date": "2025-03-28T14:10:00-04:00", "price": 110.1449966430664}, {"date": "2025-03-28T14:20:00-04:00", "price": 110.01499938964844}, {"date": "2025-03-28T14:30:00-04:00", "price": 110.12000274658203}, {"date": "2025-03-28T14:40:00-04:00", "price": 110.04000091552734}, {"date": "2025-03-28T14:50:00-04:00", "price": 110.13999938964844}, {"date": "2025-03-28T15:00:00-04:00", "price": 110.41500091552734}, {"date": "2025-03-28T15:10:00-04:00", "price": 110.11499786376953}, {"date": "2025-03-28T15:20:00-04:00", "price": 110.16600036621094}, {"date": "2025-03-28T15:30:00-04:00", "price": 109.62000274658203}, {"date": "2025-03-28T15:40:00-04:00", "price": 109.56500244140625}, {"date": "2025-03-28T15:50:00-04:00", "price": 109.6050033569336}];
        const intradayData = intradayValues.map((point, index) => ({
            x: index,
            y: point.price,
            tooltip: `${point.date}: ${point.price.toFixed(2)}`
        }));
        var store = new ItemFileReadStore({ data: gridData });
        var grid = new DataGrid({
            store: store,
            structure: [
                {
                    name: "RIC",
                    field: "ric",
                    width: "80px",
                    // Gray text for RIC
                    formatter: function(value){
                        return `<span style="color: #ccc;">${value}</span>`;
                    }
                },
                {
                    name: "Name",
                    field: "name",
                    width: "180px",
                    // Blue text for asset name
                    formatter: function(value){
                        return `<span style="color: #4ea8ff;">${value}</span>`;
                    }
                },
                {
                    name: "Last",
                    field: "last",
                    width: "100px",
                    // Orange text for "Last" price
                    formatter: function(value){
                        return `<span style="color: #ffa500;">${value}</span>`;
                    }
                },
                {
                    name: "Price Change",
                    field: "change",
                    width: "200px",
                    // Green if positive, red if negative, gray if zero or not recognized
                    formatter: function(value){
                        // Strip out non-numeric chars to parse the float
                        var numericPart = value.replace(/[^\d.-]/g, '');
                        var num = parseFloat(numericPart);

                        if (isNaN(num) || num === 0) {
                            return `<span style="color: #ccc;">${value}</span>`;
                        } else if (num > 0) {
                            return `<span style="color: #0f0;">${value}</span>`;
                        } else {
                            return `<span style="color: #f00;">${value}</span>`;
                        }
                    }
                }
            ],
            autoHeight: false
        }, "grid");


        grid.startup();

        // Update the theme to change chart background colors:
        theme.chart.fill = "rgb(16,24,40)";
        theme.chart.stroke = { color: "rgb(16,24,40)", width: 0 };
        theme.plotarea.fill = "rgb(16,24,40)";
        theme.plotarea.stroke = null;
        // Simple chart setup example
        var chart1 = new Chart2D("historicalChart");
        chart1.setTheme(theme);
        chart1.addPlot("default", { type: "Lines", markers: true });
        chart1.addAxis("x", { labels: [] });
        chart1.addAxis("y", { vertical: true });
        chart1.addSeries("Prices", priceHistory, {
            stroke: { color: "green", width: 2 },
            marker: "circle",
            markers: true,
            fill: "rgb(109,117,233)" // fill for markers
        });
        chart1.render();
        chart1.resize();

        var chart2 = new Chart2D("intraDayChart");
        chart2.setTheme(theme);
        chart2.addPlot("default", { type: "Lines", tension: "S" });
        chart2.addAxis("x", {
            labels: [{value: 0, text: "9:00"}, {value: 1, text: "9:10"}, {value: 2, text: "9:20"},
                {value: 3, text: "9:30"}, {value: 4, text: "9:40"}, {value: 5, text: "9:50"},
                {value: 6, text: "10:00"}, {value: 7, text: "10:10"}, {value: 8, text: "10:20"},
                {value: 9, text: "10:30"}, {value: 10, text: "10:40"}, {value: 11, text: "10:50"},
                {value: 12, text: "11:00"}, {value: 13, text: "11:10"}, {value: 14, text: "11:20"},
                {value: 15, text: "11:30"}, {value: 16, text: "11:40"}, {value: 17, text: "11:50"},
                {value: 18, text: "12:00"}, {value: 19, text: "12:10"}, {value: 20, text: "12:20"},
                {value: 21, text: "12:30"}, {value: 22, text: "12:40"}, {value: 23, text: "12:50"},
                {value: 24, text: "13:00"}, {value: 25, text: "13:10"}, {value: 26, text: "13:20"},
                {value: 27, text: "13:30"}, {value: 28, text: "13:40"}, {value: 29, text: "13:50"},
                {value: 30, text: "14:00"}, {value: 31, text: "14:10"}, {value: 32, text: "14:20"},
                {value: 33, text: "14:30"}, {value: 34, text: "14:40"}, {value: 35, text: "14:50"},
                {value: 36, text: "15:00"}, {value: 37, text: "15:10"}, {value: 38, text: "15:20"}
            ]
        });
        chart2.addSeries("Intraday", intradayData, {
            stroke: { color: "rgb(109,117,233)", width: 2 },
            marker: "circle",
            markers: true,
            fill: "rgb(109,117,233)" // fill for markers
        });
        chart2.render();
        chart1.resize();
    });
</script>
</body>
</html>